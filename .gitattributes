# ============================================================================
# Git Attributes for NixOS Configuration Repository
# ============================================================================
#
# This file configures how git handles specific files during merges and diffs.
#
# ============================================================================

# Unified flake files: keep local flake.lock during pulls/merges to avoid
# conflicts between machines running different Nix versions.
# flake.nix is now a unified file shared across all profiles.
#
# merge=ours: During merge, always use our version (ignore incoming changes)
flake.lock merge=ours

# ============================================================================
# Git-Crypt Encrypted Files
# ============================================================================
# Secrets directory - all .nix and .txt files encrypted
secrets/*.nix filter=git-crypt diff=git-crypt
secrets/*.txt filter=git-crypt diff=git-crypt

# Exclude template files from encryption (they're public)
secrets/*.template !filter !diff

# Infrastructure internal documentation (sensitive details)
docs/infrastructure/INFRASTRUCTURE_INTERNAL.md filter=git-crypt diff=git-crypt
