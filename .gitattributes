# ============================================================================
# Git Attributes for NixOS Configuration Repository
# ============================================================================
#
# This file configures how git handles specific files during merges and diffs.
#
# ============================================================================

# Device-specific flake files: Always keep local version during pulls/merges
# Each device has its own flake.nix (copied from profile flake like flake.LAPTOP_L15.nix)
# and flake.lock (generated from that flake). We track them for Nix purity,
# but never merge changes from remote to avoid cross-device conflicts.
#
# merge=ours: During merge, always use our version (ignore incoming changes)
flake.nix merge=ours
flake.lock merge=ours

# ============================================================================
# Git-Crypt Encrypted Files
# ============================================================================
# Secrets directory - all .nix and .txt files encrypted
secrets/*.nix filter=git-crypt diff=git-crypt
secrets/*.txt filter=git-crypt diff=git-crypt

# Exclude template files from encryption (they're public)
secrets/*.template !filter !diff

# Infrastructure internal documentation (sensitive details)
docs/infrastructure/INFRASTRUCTURE_INTERNAL.md filter=git-crypt diff=git-crypt
